{% extends "base.html" %}

{% block title %}Dashboard de Organizações - DataCheckAI{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h2>Dashboard de Migração de Organizações</h2>
    <a href="{{ url_for('adicionar_organizacao') }}" class="btn btn-primary">Adicionar Nova Organização</a>
</div>

<div class="organizacoes-grid">
    {% for organizacao in organizacoes %}
    <div class="organizacao-card">
        <h3>{{ organizacao.nome }} ({{ organizacao.codigo }})</h3>
        <div class="progresso-modulos">
            {% for modulo in organizacao.progressos %}
            <div class="modulo-progresso">
                <span class="modulo-nome">{{ modulo.modulo|capitalize }}</span>
                <div class="progress-bar">
                    <div class="progress" style="width: {{ modulo.percentual_completo }}%"></div>
                </div>
                <span class="modulo-percentual">{{ modulo.percentual_completo }}%</span>
            </div>
            {% else %}
            <p>Nenhum progresso de migração registrado.</p>
            {% endfor %}
        </div>
        <a href="{{ url_for('detalhes_organizacao', organizacao_id=organizacao.id) }}" class="btn">
            Gerenciar Migração
        </a>
    </div>
    {% else %}
    <div class="info-box">
        <p>Nenhuma organização cadastrada. <a href="{{ url_for('adicionar_organizacao') }}">Adicione a primeira organização</a> para começar.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}